# Dashboard Configuration for Asset Bundle Deployment
# This file defines reusable dashboard configurations

resources:
  dashboards:
    executive_kpi_dashboard:
      display_name: "Executive KPI Dashboard - ${var.project_name}${var.environment_suffix}"
      warehouse_id: "${var.dashboard_warehouse_id}"

      # Parent folder for organization
      parent_path: "/Shared/${var.project_name}/dashboards${var.environment_suffix}"

      # Serialized dashboard definition
      serialized_dashboard: |
        {
          "pages": [
            {
              "name": "Executive Summary",
              "displayName": "üìä Executive Summary",
              "layout": [
                {
                  "widget": {
                    "name": "current_performance",
                    "queries": [
                      {
                        "name": "exec_summary_query",
                        "query": "SELECT * FROM ${var.catalog_name}.${var.schema_name}.gold_executive_summary"
                      }
                    ],
                    "spec": {
                      "version": 2,
                      "widgetType": "table"
                    }
                  },
                  "position": {
                    "x": 0,
                    "y": 0,
                    "width": 6,
                    "height": 4
                  }
                }
              ]
            },
            {
              "name": "Daily Trends",
              "displayName": "üìà Daily Trends",
              "layout": []
            },
            {
              "name": "Hourly Patterns",
              "displayName": "‚è∞ Hourly Patterns",
              "layout": []
            }
          ]
        }

      # Tags for organization
      tags:
        - "dashboard"
        - "executive"
        - "${var.project_name}"
        - "${var.environment_suffix}"

      # Permissions (can be customized per environment)
      permissions:
        - level: "CAN_RUN"
          group_name: "users"
        - level: "CAN_MANAGE"
          group_name: "admins"

    operational_metrics_dashboard:
      display_name: "Operational Metrics - ${var.project_name}${var.environment_suffix}"
      warehouse_id: "${var.dashboard_warehouse_id}"
      parent_path: "/Shared/${var.project_name}/dashboards${var.environment_suffix}"

      serialized_dashboard: |
        {
          "pages": [
            {
              "name": "Operations Overview",
              "displayName": "‚ö° Operations",
              "layout": []
            }
          ]
        }

      tags:
        - "dashboard"
        - "operations"
        - "${var.project_name}"